{"version":3,"file":"static/js/620.05b52e24.chunk.js","mappings":"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","sources":["HOC/withAuthRedirect.tsx","webpack://samurai-way/./src/components/Profile/ProfileInfo/ProfileInfo.module.css?ead2","components/Profile/ProfileInfo/ProfileStatus.tsx","components/Profile/ProfileInfo/ProfileInfo.tsx","webpack://samurai-way/./src/components/Profile/Posts/Post/Post.module.css?59e2","components/Profile/Posts/Post/Post.tsx","webpack://samurai-way/./src/components/Profile/Posts/posts.module.css?c81e","components/Profile/Posts/AddPostForm.tsx","components/Profile/Posts/Posts.tsx","components/Profile/Posts/PostsContainer.tsx","components/Profile/Profile.tsx","components/Profile/ProfileContainer.tsx"],"sourcesContent":["import React, {ComponentType} from 'react';\nimport {Redirect} from 'react-router-dom';\nimport {connect} from 'react-redux';\nimport {AppStateType} from '../redux/redux-store';\n\ntype mapStatePropsType = {\n    isAuth: boolean\n}\nconst mapStateToProps = (state: AppStateType): mapStatePropsType => ({\n    isAuth: state.auth.isAuth\n})\n\n// Типизация HOC !\nfunction WithAuthRedirect<T>(Component: ComponentType<T>) {\n    const RedirectComponent = (props: mapStatePropsType) => {\n        let {isAuth, ...restProps} = props\n        if (!isAuth) {\n            // на 6 версии router-dom\n            // return <Navigate to={'/login'}/>\n            return <Redirect to={'/login'}/>\n        }\n        return <Component{...restProps as T}/>\n    }\n    let ConnectedAuthRedirectComponent = connect(mapStateToProps)(RedirectComponent)\n    return ConnectedAuthRedirectComponent\n}\n\nexport default WithAuthRedirect;","// extracted by mini-css-extract-plugin\nexport default {\"content\":\"ProfileInfo_content__DznCY\",\"img\":\"ProfileInfo_img__+4bLE\"};","import React, {ChangeEvent} from \"react\";\nimport s from \"./ProfileInfo.module.css\"\nimport image from \"../../../img/picture.jpg\"\nimport {profileType} from '../../../redux/profile-reducer';\nimport Preloader from '../../common/Preloader/Preloader';\nimport login from '../../Login/Login';\n\ntype ProfileStatusType = {\n    status: string\n    updateUserStatus: (status: string) => void\n}\n\nclass ProfileStatus extends React.Component<ProfileStatusType> {\n\n    state = {\n        editMode: false,\n        status: this.props.status\n    }\n\n    activeEditMode = () => {\n        this.setState({editMode: true})\n    }\n    deactiveEditMode = () => {\n        this.setState({editMode: false})\n        this.props.updateUserStatus(this.state.status)\n    }\n    onStatusChange = (e: ChangeEvent<HTMLInputElement>) => {\n        this.setState({status: e.currentTarget.value})\n    }\n\n    componentDidUpdate(prevProps: Readonly<ProfileStatusType>, prevState: Readonly<{}>, snapshot?: any) {\n        if(prevProps.status!==this.state.status){\n            this.setState({status:this.props.status})\n        }\n    }\n\n    render() {\n\n        return (\n\n            <div>{!this.state.editMode\n                ? <span onDoubleClick={this.activeEditMode}>\n                {this.props.status}\n            </span>\n                : <div>\n                    <input onChange={(e) => this.onStatusChange(e)} type=\"text\"\n                           value={this.state.status}\n                           onBlur={this.deactiveEditMode} autoFocus={true}/>\n                </div>}\n            </div>);\n\n\n    }\n}\n\nexport default ProfileStatus;","import React, {ChangeEvent} from \"react\";\nimport s from \"./ProfileInfo.module.css\"\nimport {profileType} from '../../../redux/profile-reducer';\nimport Preloader from '../../common/Preloader/Preloader';\nimport ProfileStatus from './ProfileStatus';\nimport userPhoto from './../../../img/monkey.jpg'\n\ntype ProfileInfoType = {\n    profile: profileType | null\n    status: string\n    updateUserStatus: (status: string) => void\n    isOwner: boolean\n    savePhoto:()=>void\n}\n\nfunction ProfileInfo({profile, status, updateUserStatus, isOwner,savePhoto}: ProfileInfoType) {\n\n    if (!profile) {\n        return <Preloader/>\n    }\n    const onMainPhotoSelected = (e: ChangeEvent<HTMLInputElement>) => {\n        // @ts-ignore\n        if (e.target.files.length) {\n            // @ts-ignore\n            savePhoto(e.target.files[0])\n        }\n    }\n    return (\n\n        <div>\n            {/*<img src={image} alt={'картинка'} className={s.img}/>*/}\n            <img src={profile.photos.large || userPhoto} style={{maxWidth: 250, height: 250, borderRadius: 50}}/>\n\n            {isOwner && <input type={'file'} accept={'image/*'} onChange={onMainPhotoSelected}/>}\n            <div className={s.content}>\n                <div><b>Full Name: </b>{profile.fullName}</div>\n                <ProfileStatus status={status} updateUserStatus={updateUserStatus}/>\n                <div><b>About me: </b>{profile.aboutMe}</div>\n                <div><b>Looking for a job</b>: {profile.lookingForAJob ?'Yes':'No'}</div>\n                <div><b>My professional Skills</b>: {profile.lookingForAJobDescription}</div>\n            </div>\n        </div>);\n\n\n}\n\nexport default ProfileInfo;","// extracted by mini-css-extract-plugin\nexport default {\"item\":\"Post_item__FKz4t\",\"style\":\"Post_style__pP+Ky\"};","import React from 'react';\nimport s  from \"./Post.module.css\"\nimport Image from \"../../../../img/logoPost.jpg\";\n\ntype PostPropsType = {\n    message: string\n    likesCount: number\n}\n\nfunction Post(props: PostPropsType) {\n    return (\n        <>\n            <div className={s.item}>\n                <img className={s.style} src={Image}/>\n\n                {props.message}</div>\n            <div> Нравится {props.likesCount}</div>\n        </>\n    );\n}\n\nexport default Post;","// extracted by mini-css-extract-plugin\nexport default {\"postsBlock\":\"posts_postsBlock__LahyW\",\"posts\":\"posts_posts__Rg3-E\"};","import React from 'react';\nimport {FieldValues, useForm} from 'react-hook-form';\n\ntype AddPostPropsType = {\n    addPost: (postMessage: string) => void\n}\n\ntype Inputs = {\n    post: string,\n};\nexport const AddPostForm = ({addPost}: AddPostPropsType) => {\n    const {register, handleSubmit, reset, formState: {errors, isValid}} = useForm<Inputs>({mode: 'onSubmit'})\n    const onSubmit = (data: FieldValues) => {\n        addPost(data.post)\n        reset()\n    }\n    return <>\n        <form onSubmit={handleSubmit(onSubmit)}>\n            <input type=\"text\" placeholder={'Введите сообщение...'} {...register('post', {\n                required: true,\n                minLength: {\n                    value: 10,\n                    message: 'Минимальная длина поста: 10 символов'\n                }\n            })}/>\n            <div>{errors.post && <p>{errors.post.message}</p>}</div>\n            <input type={'submit'} disabled={!isValid}/>\n        </form>\n    </>\n}","import React from 'react';\nimport Post from './Post/Post'\nimport s from './posts.module.css'\nimport {PostsPropsType} from './PostsContainer';\nimport {AddPostForm} from './AddPostForm';\n\n\nfunction Posts(props: PostsPropsType) {\n    const dialogs = props.posts.map((p, i) => {\n        return <Post key={i} message={p.message} likesCount={p.likesCount}/>\n    })\n\n    const AddPostHandler = (postMessage: string) => {\n        props.AddPost(postMessage);\n    }\n    return (\n        <>\n            <div className={s.postsBlock}><h3>my Posts</h3>\n                <div>\n                    <AddPostForm addPost={AddPostHandler}/>\n                </div>\n                <div className={s.posts}>\n                    {dialogs}\n                </div>\n            </div>\n        </>\n    );\n}\n\nexport default Posts;","import React from 'react';\nimport Posts from './Posts';\nimport {\n    AddPostActionCreator,\n   PostType\n} from '../../../redux/profile-reducer';\nimport {connect} from 'react-redux';\nimport {Dispatch} from 'redux';\nimport {AppStateType} from '../../../redux/redux-store';\n\n\ntype MapStatePropsType = {\n    posts: Array<PostType>\n}\ntype MapDispatchPropsType = {\n    AddPost: (postMessage:string) => void\n}\nconst mapStateToProps = (state: AppStateType): MapStatePropsType => {\n    return {\n        posts: state.profilePage.posts\n    }\n}\nconst mapDispatchToProps = (dispatch: Dispatch): MapDispatchPropsType => {\n    return {\n        AddPost: (postMessage:string) => dispatch(AddPostActionCreator(postMessage)),\n    }\n}\nexport type PostsPropsType = MapStatePropsType & MapDispatchPropsType\n\nexport const PostsContainer = connect(mapStateToProps, mapDispatchToProps)(Posts);","import React from 'react';\nimport ProfileInfo from './ProfileInfo/ProfileInfo';\nimport {PostsContainer} from './Posts/PostsContainer';\nimport {profileType} from '../../redux/profile-reducer';\n\ntype ProfilePropsType = {\n    profile: profileType | null\n    isOwner:boolean\n    status: string\n    updateUserStatus:(status: string)=>void\n    savePhoto:()=>void\n}\n\nfunction Profile({profile,status,updateUserStatus,isOwner,savePhoto}: ProfilePropsType) {\n    return (\n\n        <div>\n            <ProfileInfo profile={profile} status={status} updateUserStatus={updateUserStatus} isOwner={isOwner} savePhoto={savePhoto}/>\n            <PostsContainer/>\n        </div>);\n}\n\nexport default Profile;","import React from 'react';\nimport Profile from './Profile';\nimport {connect} from 'react-redux';\nimport {getUserProfile, getUserStatus, profileType, savePhoto, updateUserStatus} from '../../redux/profile-reducer';\nimport {AppStateType, DispatchType} from '../../redux/redux-store';\nimport {RouteComponentProps, withRouter} from 'react-router-dom';\nimport WithAuthRedirect from '../../HOC/withAuthRedirect';\nimport {compose} from 'redux';\n\n\nclass ProfileContainer extends React.Component<ProfileContainerPropsType> {\n    refreshProfile() {\n        let userId: string | number = this.props.match.params.userId;\n        if (!userId) {\n            userId = Number(this.props.autoryzedUserId)\n            if (!userId) {\n                this.props.history.push(\"/login\")\n            }\n        }\n        this.props.getUserProfile(String(userId))\n        this.props.getUserStatus(String(userId))\n    }\n\n    componentDidMount() {\n        this.refreshProfile()\n\n    }\n\n    componentDidUpdate(prevProps: any, prevState: any, snapshot: any) {\n        if (this.props.match.params.userId != prevProps.match.params.userId) {\n            this.refreshProfile()\n        }\n\n    }\n\n\n    render() {\n        return (\n\n            <div>\n                <Profile profile={this.props.profile} isOwner={!this.props.match.params.userId}\n                         status={this.props.status}\n                         updateUserStatus={this.props.updateUserStatus}\n                         savePhoto={this.props.savePhoto}/>\n            </div>);\n    }\n}\n\n\n//types\ntype PathParamsType = {\n    userId: string,\n}\ntype mapStateToPropsType = {\n    profile: null | profileType\n    status: string\n    autoryzedUserId: null | number\n    isAuth: boolean\n}\ntype mapDispatchToPropsType = {\n    getUserProfile: (id: string) => void\n    getUserStatus: (id: string) => void\n    savePhoto: () => void\n    updateUserStatus: (status: string) => void\n}\nlet mapStateToProps = (state: AppStateType): mapStateToPropsType => ({\n    profile: state.profilePage.profile,\n    status: state.profilePage.status,\n    autoryzedUserId: state.auth.userId,\n    isAuth: state.auth.isAuth\n})\n\n\n//так выглядит типизация withRouter\nexport type OwnPropsType = mapStateToPropsType & mapDispatchToPropsType\ntype ProfileContainerPropsType = RouteComponentProps<PathParamsType> & OwnPropsType\n\n\n// до рефакторинга\n// let AuthRedirectComponent = WithAuthRedirect(ProfileContainer)\n// HOC withRouter для снабжения ProfileContainer дополнит пропсами для того что бы брать id юзера (let userId = this.props.match.params.userId)\n// let WithURLDataContainerComponent = withRouter(AuthRedirectComponent)\n// export default connect(mapStateToProps, mapDispatchToProps)(WithURLDataContainerComponent);\n\n\n// после рефакторинга\n// функция compose позволяет создать цепочку вызовов функций, результат выполнений первой функции помещая е следующую в конвейере\nexport default compose<React.ComponentType>(connect(mapStateToProps, {getUserProfile,getUserStatus,updateUserStatus,savePhoto}), withRouter, WithAuthRedirect)(ProfileContainer)"],"names":["mapStateToProps","state","isAuth","auth","Component","connect","props","restProps","to","ProfileStatus","editMode","status","activeEditMode","setState","deactiveEditMode","updateUserStatus","onStatusChange","e","currentTarget","value","prevProps","prevState","snapshot","this","onChange","type","onBlur","autoFocus","onDoubleClick","React","profile","isOwner","savePhoto","src","photos","large","userPhoto","style","maxWidth","height","borderRadius","accept","target","files","length","className","s","fullName","aboutMe","lookingForAJob","lookingForAJobDescription","Preloader","Image","message","likesCount","AddPostForm","addPost","useForm","mode","register","handleSubmit","reset","formState","errors","isValid","onSubmit","data","post","placeholder","required","minLength","disabled","dialogs","posts","map","p","i","postMessage","AddPost","PostsContainer","profilePage","dispatch","AddPostActionCreator","Posts","ProfileContainer","userId","match","params","Number","autoryzedUserId","history","push","getUserProfile","String","getUserStatus","refreshProfile","compose","withRouter","WithAuthRedirect"],"sourceRoot":""}